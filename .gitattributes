class Kurs:
    def __init__(self, name, typ, wochenstunden, klausuren_pro_semester, gewichtung, kategorie):
        self.name = name
        self.typ = typ  # "LK", "GK", "Sport"
        self.wochenstunden = wochenstunden
        self.klausuren_pro_semester = klausuren_pro_semester
        self.gewichtung = gewichtung  # "doppelt" oder "einfach"
        self.kategorie = kategorie  # z.B. "Fremdsprache", "Naturwissenschaft", "Gesellschaftswissenschaft"
    
    def info_anzeigen(self):
        print(f"\n--- {self.name} ---")
        print(f"Typ: {self.typ}")
        print(f"Wochenstunden: {self.wochenstunden}")
        print(f"Klausuren pro Semester: {self.klausuren_pro_semester}")
        print(f"Gewichtung f√ºrs Abitur: {self.gewichtung}")
        print(f"Kategorie: {self.kategorie}")


class Schueler:
    def __init__(self, name):
        self.name = name
        self.leistungskurse = []
        self.grundkurse = []
        self.sport_praxis = None
        self.sport_theorie = None
        self.pruefungsfach_3 = None
        self.pruefungsfach_4 = None
        self.fuenfte_pk = None
        self.hatte_zweite_fs_vor_11 = None  # True/False
    
    def leistungskurs_waehlen(self, kurs):
        if len(self.leistungskurse) < 2:
            self.leistungskurse.append(kurs)
            print(f"‚úì {kurs.name} als Leistungskurs hinzugef√ºgt")
        else:
            print("‚úó Du hast bereits 2 Leistungskurse gew√§hlt!")
    
    def grundkurs_waehlen(self, kurs):
        self.grundkurse.append(kurs)
        print(f"‚úì {kurs.name} als Grundkurs hinzugef√ºgt")
    
    def sport_waehlen(self, sport_praxis, sport_theorie=None):
        self.sport_praxis = sport_praxis
        self.sport_theorie = sport_theorie
        print(f"‚úì {sport_praxis.name} hinzugef√ºgt")
        if sport_theorie:
            print(f"‚úì {sport_theorie.name} hinzugef√ºgt")
    
    def kurswahl_anzeigen(self):
        print(f"\n{'='*60}")
        print(f"KURSWAHL VON: {self.name}")
        print(f"{'='*60}")
        
        print("\nüìö LEISTUNGSKURSE (2 F√§cher):")
        if self.leistungskurse:
            for lk in self.leistungskurse:
                print(f"  ‚Ä¢ {lk.name} - {lk.wochenstunden}h/Woche")
        else:
            print("  Noch keine Leistungskurse gew√§hlt")
        
        print("\nüìñ GRUNDKURSE:")
        if self.grundkurse:
            for gk in self.grundkurse:
                print(f"  ‚Ä¢ {gk.name} - {gk.wochenstunden}h/Woche")
        else:
            print("  Noch keine Grundkurse gew√§hlt")
        
        print("\n‚öΩ SPORT:")
        if self.sport_praxis:
            print(f"  ‚Ä¢ {self.sport_praxis.name} - {self.sport_praxis.wochenstunden}h/Woche")
        if self.sport_theorie:
            print(f"  ‚Ä¢ {self.sport_theorie.name} - {self.sport_theorie.wochenstunden}h/Woche")
        if not self.sport_praxis and not self.sport_theorie:
            print("  Kein Sport gew√§hlt")
        
        print("\nüéØ PR√úFUNGSF√ÑCHER:")
        print(f"  1. PF: {self.leistungskurse[0].name if len(self.leistungskurse) > 0 else 'N/A'}")
        print(f"  2. PF: {self.leistungskurse[1].name if len(self.leistungskurse) > 1 else 'N/A'}")
        print(f"  3. PF: {self.pruefungsfach_3.name if self.pruefungsfach_3 else 'Noch nicht gew√§hlt'}")
        print(f"  4. PF: {self.pruefungsfach_4.name if self.pruefungsfach_4 else 'Noch nicht gew√§hlt'}")
        print(f"  5. PK: {self.fuenfte_pk.name if self.fuenfte_pk else 'Noch nicht gew√§hlt'}")
        
        # Gesamtstunden berechnen
        gesamt_stunden = sum(lk.wochenstunden for lk in self.leistungskurse)
        gesamt_stunden += sum(gk.wochenstunden for gk in self.grundkurse)
        if self.sport_praxis:
            gesamt_stunden += self.sport_praxis.wochenstunden
        if self.sport_theorie:
            gesamt_stunden += self.sport_theorie.wochenstunden
        
        print(f"\n‚è±Ô∏è  GESAMT WOCHENSTUNDEN: {gesamt_stunden}")
        print(f"{'='*60}\n")
    
    def validiere_kurswahl(self):
        """√úberpr√ºft ob alle Bedingungen erf√ºllt sind"""
        fehler = []
        warnungen = []
        
        # Gesamtzahl der Kurse pr√ºfen (8 LK-Semester + 24 GK-Semester = 32 Semester)
        lk_semester = len(self.leistungskurse) * 4  # Jeder LK geht 4 Semester
        gk_semester = len(self.grundkurse) * 4  # Jeder GK geht 4 Semester
        gesamt_semester = lk_semester + gk_semester
        
        if lk_semester != 8:
            fehler.append(f"‚ùå Du brauchst 8 LK-Semester (2 LKs √ó 4 Sem), hast aber {lk_semester}")
        if gk_semester < 24:
            fehler.append(f"‚ùå Du brauchst mindestens 24 GK-Semester, hast aber nur {gk_semester}")
        
        # Alle Kurse sammeln
        alle_kurse = self.leistungskurse + self.grundkurse
        
        # 4‚Äì6 Kurse in Fremdsprachen
        fs_kurse = [k for k in alle_kurse if k.kategorie == "Fremdsprache"]
        if len(fs_kurse) < 4 or len(fs_kurse) > 6:
            fehler.append(f"‚ùå Du brauchst 4-6 Fremdsprachenkurse, hast aber {len(fs_kurse)}")
        
        # 2. Fremdsprache ab 11. Klasse (wenn nicht vorher)
        if not self.hatte_zweite_fs_vor_11:
            neue_fs = [k for k in fs_kurse if "(neu)" in k.name]
            if len(neue_fs) < 1:
                fehler.append("‚ùå Du brauchst eine neu beginnende 2. Fremdsprache ab Klasse 11")
        
        # 4x Deutsch und 4x Mathematik
        deutsch_kurse = [k for k in alle_kurse if "Deutsch" in k.name]
        mathe_kurse = [k for k in alle_kurse if "Mathematik" in k.name]
        
        if len(deutsch_kurse) < 1:
            fehler.append("‚ùå Du brauchst Deutsch (4 Semester)")
        if len(mathe_kurse) < 1:
            fehler.append("‚ùå Du brauchst Mathematik (4 Semester)")
        
        # Naturwissenschaften
        nawi_kurse = [k for k in alle_kurse if k.kategorie == "Naturwissenschaft"]
        physik = [k for k in nawi_kurse if "Physik" in k.name]
        chemie = [k for k in nawi_kurse if "Chemie" in k.name]
        biologie = [k for k in nawi_kurse if "Biologie" in k.name]
        
        # Pr√ºfe: Physik/Chemie durchg√§ngig ODER 4x Bio + mind. 2x Physik/Chemie
        physik_chemie_durchgaengig = (len(physik) >= 1 or len(chemie) >= 1)
        bio_mit_ergaenzung = len(biologie) >= 1 and (len(physik) >= 2 or len(chemie) >= 2)
        
        if not physik_chemie_durchgaengig and not bio_mit_ergaenzung:
            fehler.append("‚ùå Naturwissenschaften: Entweder Physik/Chemie durchg√§ngig (4 Sem) ODER Biologie (4 Sem) + mind. 2 Sem Physik/Chemie")
        
        # Kunst/Musik/DS (au√üer bei neuer Fremdsprache)
        kunst_musik_ds = [k for k in alle_kurse if k.kategorie == "Kunst/Musik/DS"]
        neue_fs_ab_11 = [k for k in fs_kurse if "(neu)" in k.name]
        
        if not neue_fs_ab_11 and len(kunst_musik_ds) < 1:
            fehler.append("‚ùå Du brauchst 2 Semester Kunst, Musik oder Darstellendes Spiel")
        
        # Gesellschaftswissenschaften
        gesell_kurse = [k for k in alle_kurse if k.kategorie == "Gesellschaftswissenschaft"]
        geschichte = [k for k in gesell_kurse if "Geschichte" in k.name]
        politik = [k for k in gesell_kurse if "Politik" in k.name]
        geografie = [k for k in gesell_kurse if "Geografie" in k.name]
        philosophie = [k for k in gesell_kurse if "Philosophie" in k.name]
        
        # 4x Geschichte + 2x Politik ODER 4x Politik + 2x Geschichte (oder mit Geo/Philo)
        gesell_ok = False
        if len(geschichte) >= 1 and len(politik) >= 1:
            gesell_ok = True
        elif len(geschichte) >= 1 and (len(geografie) >= 1 or len(philosophie) >= 1):
            gesell_ok = True
        elif len(politik) >= 1 and (len(geografie) >= 1 or len(philosophie) >= 1):
            gesell_ok = True
        
        if not gesell_ok:
            fehler.append("‚ùå Gesellschaftswissenschaften: z.B. 4 Sem Geschichte + 2 Sem Politik (oder Kombinationen mit Geo/Philosophie)")
        
        # Pr√ºfungsf√§cher
        if not self.pruefungsfach_3:
            warnungen.append("‚ö†Ô∏è  3. Pr√ºfungsfach noch nicht gew√§hlt")
        if not self.pruefungsfach_4:
            warnungen.append("‚ö†Ô∏è  4. Pr√ºfungsfach noch nicht gew√§hlt")
        if not self.fuenfte_pk:
            warnungen.append("‚ö†Ô∏è  5. Pr√ºfungskomponente noch nicht gew√§hlt")
        
        # Sport als Pr√ºfungsfach ‚Üí Sporttheorie
        pruefungsfaecher = [self.pruefungsfach_3, self.pruefungsfach_4]
        if any(pf and "Sport" in pf.name for pf in pruefungsfaecher):
            if not self.sport_theorie:
                fehler.append("‚ùå Wenn Sport Pr√ºfungsfach ist, brauchst du auch Sporttheorie")
        
        # Ergebnisse anzeigen
        print("\n" + "="*60)
        print("VALIDIERUNG DER KURSWAHL")
        print("="*60)
        
        if not fehler and not warnungen:
            print("\n‚úÖ Alle Bedingungen erf√ºllt! Deine Kurswahl ist g√ºltig.")
        else:
            if fehler:
                print("\n‚ùå FEHLER (m√ºssen behoben werden):")
                for f in fehler:
                    print(f"  {f}")
            
            if warnungen:
                print("\n‚ö†Ô∏è  WARNUNGEN:")
                for w in warnungen:
                    print(f"  {w}")
        
        print("="*60 + "\n")
        return len(fehler) == 0


def beispiel_kurse_erstellen():
    kurse = {
        "leistungskurse": [
            Kurs("Mathematik", "LK", 5, "2 (1 im 4. Sem)", "doppelt", "Mathematik"),
            Kurs("Deutsch", "LK", 5, "2 (1 im 4. Sem)", "doppelt", "Deutsch"),
            Kurs("Englisch", "LK", 5, "2 (1 im 4. Sem)", "doppelt", "Fremdsprache"),
            Kurs("Biologie", "LK", 5, "2 (1 im 4. Sem)", "doppelt", "Naturwissenschaft"),
            Kurs("Geschichte", "LK", 5, "2 (1 im 4. Sem)", "doppelt", "Gesellschaftswissenschaft"),
        ],
        "grundkurse": [
            # Fremdsprachen
            Kurs("Englisch", "GK", 3, "1 pro Semester", "einfach", "Fremdsprache"),
            Kurs("Franz√∂sisch", "GK", 3, "1 pro Semester", "einfach", "Fremdsprache"),
            Kurs("Spanisch (neu)", "GK", 4, "1 pro Semester", "einfach", "Fremdsprache"),
            Kurs("Latein", "GK", 3, "1 pro Semester", "einfach", "Fremdsprache"),
            
            # Naturwissenschaften
            Kurs("Biologie", "GK", 3, "1 pro Semester", "einfach", "Naturwissenschaft"),
            Kurs("Chemie", "GK", 3, "1 pro Semester", "einfach", "Naturwissenschaft"),
            Kurs("Physik", "GK", 3, "1 pro Semester", "einfach", "Naturwissenschaft"),
            
            # Gesellschaftswissenschaften
            Kurs("Geschichte", "GK", 3, "1 pro Semester", "einfach", "Gesellschaftswissenschaft"),
            Kurs("Politikwissenschaft", "GK", 3, "1 pro Semester", "einfach", "Gesellschaftswissenschaft"),
            Kurs("Geografie", "GK", 3, "1 pro Semester", "einfach", "Gesellschaftswissenschaft"),
            Kurs("Philosophie", "GK", 3, "1 pro Semester", "einfach", "Gesellschaftswissenschaft"),
            
            # Kunst/Musik/DS
            Kurs("Kunst", "GK", 2, "1 pro Semester", "einfach", "Kunst/Musik/DS"),
            Kurs("Musik", "GK", 2, "1 pro Semester", "einfach", "Kunst/Musik/DS"),
            Kurs("Darstellendes Spiel", "GK", 2, "1 pro Semester", "einfach", "Kunst/Musik/DS"),
            
            # Pflichtf√§cher
            Kurs("Mathematik", "GK", 3, "1 pro Semester", "einfach", "Mathematik"),
            Kurs("Deutsch", "GK", 3, "1 pro Semester", "einfach", "Deutsch"),
        ],
        "sport": {
            "praxis": Kurs("Sport (Praxis)", "Sport", 2, "keine", "einfach", "Sport"),
            "theorie": Kurs("Sporttheorie", "GK", 2, "1 pro Semester", "einfach", "Sport")
        }
    }
    return kurse


def main():
    def read_int_in_range(prompt, min_value, max_value):
        while True:
            try:
                val = int(input(prompt))
            except ValueError:
                print("Bitte eine Zahl eingeben.")
                continue
            if val < min_value or val > max_value:
                print(f"Bitte eine Zahl zwischen {min_value} und {max_value} eingeben.")
                continue
            return val

    print("="*60)
    print("BERLINER OBERSTUFEN KURSWAHLSYSTEM")
    print("="*60)
    
    name = input("\nWie hei√üt du? ")
    schueler = Schueler(name)
    
    # Frage nach 2. Fremdsprache
    fs_antwort = input("\nHattest du bereits vor Klasse 11 eine 2. Fremdsprache? (j/n): ")
    schueler.hatte_zweite_fs_vor_11 = fs_antwort.lower() == 'j'
    
    kurse = beispiel_kurse_erstellen()
    
    # Leistungskurse w√§hlen
    print("\n" + "="*60)
    print("SCHRITT 1: LEISTUNGSKURSE W√ÑHLEN (2 F√§cher)")
    print("="*60)
    print("Verf√ºgbare Leistungskurse:")
    for i, lk in enumerate(kurse["leistungskurse"], 1):
        print(f"{i}. {lk.name} ({lk.kategorie})")
    
    for i in range(2):
        while True:
            wahl = read_int_in_range(f"\nW√§hle Leistungskurs {i+1} (Nummer): ", 1, len(kurse["leistungskurse"])) - 1
            kurs_auswahl = kurse["leistungskurse"][wahl]
            if kurs_auswahl in schueler.leistungskurse:
                print("Diesen Kurs hast du bereits gew√§hlt. Bitte w√§hle einen anderen.")
                continue
            schueler.leistungskurs_waehlen(kurs_auswahl)
            break
    
    # Grundkurse w√§hlen
    print("\n" + "="*60)
    print("SCHRITT 2: GRUNDKURSE W√ÑHLEN (mindestens 6 f√ºr 24 Semester)")
    print("="*60)
    print("Verf√ºgbare Grundkurse:")
    for i, gk in enumerate(kurse["grundkurse"], 1):
        print(f"{i}. {gk.name} ({gk.kategorie})")
    
    while True:
        try:
            anzahl_gk = int(input("\nWie viele Grundkurse m√∂chtest du w√§hlen? (empfohlen: 6-8): "))
            if anzahl_gk < 1:
                print("Du brauchst mindestens 1 Grundkurs.")
                continue
            if anzahl_gk > len(kurse["grundkurse"]):
                print(f"Maximal {len(kurse['grundkurse'])} verf√ºgbar.")
                continue
            break
        except ValueError:
            print("Bitte eine Zahl eingeben.")
    
    for i in range(anzahl_gk):
        while True:
            wahl = read_int_in_range(f"W√§hle Grundkurs {i+1} (Nummer): ", 1, len(kurse["grundkurse"])) - 1
            kurs_auswahl = kurse["grundkurse"][wahl]
            if kurs_auswahl in schueler.grundkurse:
                print("Diesen Grundkurs hast du bereits gew√§hlt. Bitte w√§hle einen anderen.")
                continue
            schueler.grundkurs_waehlen(kurs_auswahl)
            break
    
    # Sport w√§hlen
    print("\n" + "="*60)
    print("SCHRITT 3: SPORT")
    print("="*60)
    sport_wahl = input("M√∂chtest du Sport (Praxis) w√§hlen? (j/n): ")
    sport_theorie = None
    if sport_wahl.lower() == 'j':
        theorie_wahl = input("M√∂chtest du auch Sporttheorie w√§hlen? (j/n): ")
        if theorie_wahl.lower() == 'j':
            sport_theorie = kurse["sport"]["theorie"]
            schueler.grundkurse.append(sport_theorie)
        schueler.sport_waehlen(kurse["sport"]["praxis"], sport_theorie)
    
    # Pr√ºfungsf√§cher w√§hlen
    print("\n" + "="*60)
    print("SCHRITT 4: PR√úFUNGSF√ÑCHER FESTLEGEN")
    print("="*60)
    print("1. und 2. Pr√ºfungsfach: Deine Leistungskurse")
    print(f"  ‚Üí {schueler.leistungskurse[0].name}")
    print(f"  ‚Üí {schueler.leistungskurse[1].name}")
    
    alle_gk_namen = [f"{i+1}. {gk.name}" for i, gk in enumerate(schueler.grundkurse)]
    
    print("\n3. Pr√ºfungsfach (aus deinen Grundkursen):")
    for name in alle_gk_namen:
        print(f"  {name}")
    wahl_3 = read_int_in_range("W√§hle 3. Pr√ºfungsfach: ", 1, len(schueler.grundkurse)) - 1
    schueler.pruefungsfach_3 = schueler.grundkurse[wahl_3]
    
    print("\n4. Pr√ºfungsfach (aus deinen Grundkursen):")
    for name in alle_gk_namen:
        print(f"  {name}")
    wahl_4 = read_int_in_range("W√§hle 4. Pr√ºfungsfach: ", 1, len(schueler.grundkurse)) - 1
    schueler.pruefungsfach_4 = schueler.grundkurse[wahl_4]
    
    print("\n5. Pr√ºfungskomponente (aus deinen Grundkursen):")
    for name in alle_gk_namen:
        print(f"  {name}")
    wahl_5 = read_int_in_range("W√§hle 5. PK: ", 1, len(schueler.grundkurse)) - 1
    schueler.fuenfte_pk = schueler.grundkurse[wahl_5]
    
    # Kurswahl anzeigen
    schueler.kurswahl_anzeigen()
    
    # Validierung durchf√ºhren
    schueler.validiere_kurswahl()


if __name__ == "__main__":
    main()